<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapid Azure Digest - ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #0066cc, #004499);
            color: white;
            border-radius: 10px;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.loading { background-color: #fff3cd; color: #856404; }
        .status.success { background-color: #d1e7dd; color: #0f5132; }
        .status.error { background-color: #f8d7da; color: #721c24; }
        .article {
            background: white;
            margin: 15px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid #0066cc;
        }
        .article h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .article .japanese-title {
            color: #0066cc;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        .article .description {
            color: #666;
            margin: 10px 0;
        }
        .article .tags {
            margin: 10px 0;
        }
        .tag {
            display: inline-block;
            background: #e9ecef;
            color: #495057;
            padding: 3px 8px;
            margin: 2px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        .article .date {
            color: #999;
            font-size: 0.9em;
        }
        .test-buttons {
            text-align: center;
            margin: 20px 0;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            margin: 0 10px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            font-size: 16px;
        }
        .btn:hover {
            background: #004499;
        }
        .endpoint-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸš€ Rapid Azure Digest</h1>
        <p>Azure æœ€æ–°æƒ…å ± - ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆç’°å¢ƒ</p>
    </div>

    <div class="endpoint-info">
        <strong>ãƒ­ãƒ¼ã‚«ãƒ«API:</strong> http://localhost:7071/api/articles<br>
        <strong>ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³API:</strong> https://salmon-beach-0b86ff00f.4.azurestaticapps.net/api/articles
    </div>

    <div class="test-buttons">
        <button class="btn" onclick="loadArticles('local')">ğŸ“± ãƒ­ãƒ¼ã‚«ãƒ«API ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn" onclick="loadArticles('production')">â˜ï¸ ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³API ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn" onclick="clearResults()">ğŸ§¹ ã‚¯ãƒªã‚¢</button>
    </div>

    <div id="status" class="status loading" style="display: none;">
        èª­ã¿è¾¼ã¿ä¸­...
    </div>

    <div id="articles">
        <p style="text-align: center; color: #666;">ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ API ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚</p>
    </div>

    <script>
        const endpoints = {
            local: 'http://localhost:7071/api/articles',
            production: 'https://salmon-beach-0b86ff00f.4.azurestaticapps.net/api/articles'
        };

        async function loadArticles(type) {
            const statusDiv = document.getElementById('status');
            const articlesDiv = document.getElementById('articles');
            
            statusDiv.style.display = 'block';
            statusDiv.className = 'status loading';
            statusDiv.textContent = `${type === 'local' ? 'ãƒ­ãƒ¼ã‚«ãƒ«' : 'ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³'} API ã‹ã‚‰èª­ã¿è¾¼ã¿ä¸­...`;
            
            try {
                const response = await fetch(endpoints[type]);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                statusDiv.className = 'status success';
                statusDiv.textContent = `âœ… æˆåŠŸ! ${data.articles.length} ä»¶ã®è¨˜äº‹ã‚’å–å¾— (${type === 'local' ? 'ãƒ­ãƒ¼ã‚«ãƒ«' : 'ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³'})`;
                
                displayArticles(data.articles, data.lastUpdated);
                
            } catch (error) {
                statusDiv.className = 'status error';
                statusDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
                articlesDiv.innerHTML = `
                    <div class="article" style="border-left-color: #dc3545;">
                        <h3>ğŸ’¥ API ã‚¨ãƒ©ãƒ¼</h3>
                        <p><strong>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:</strong> ${endpoints[type]}</p>
                        <p><strong>ã‚¨ãƒ©ãƒ¼è©³ç´°:</strong> ${error.message}</p>
                        <p><strong>å¯¾å‡¦æ–¹æ³•:</strong></p>
                        <ul>
                            <li>ãƒ­ãƒ¼ã‚«ãƒ«ã®å ´åˆ: <code>cd api && func start</code> ã§APIãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                            <li>ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã®å ´åˆ: Azure Static Web Apps ã®ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ã‚’ç¢ºèª</li>
                        </ul>
                    </div>
                `;
            }
        }

        function displayArticles(articles, lastUpdated) {
            const articlesDiv = document.getElementById('articles');
            
            let html = `
                <div style="text-align: center; margin-bottom: 20px; color: #666;">
                    <strong>æœ€çµ‚æ›´æ–°:</strong> ${new Date(lastUpdated).toLocaleString('ja-JP')}
                </div>
            `;
            
            articles.forEach(article => {
                const tags = article.technicalTags || [];
                const tagsHtml = tags.map(tag => `<span class="tag">${tag}</span>`).join('');
                
                html += `
                    <div class="article">
                        <h3><a href="${article.link}" target="_blank" style="text-decoration: none; color: #333;">${article.title}</a></h3>
                        <div class="japanese-title">${article.japaneseTitle || ''}</div>
                        <div class="description">${article.description}</div>
                        <div class="description" style="color: #0066cc;">${article.japaneseDescription || ''}</div>
                        <div class="tags">${tagsHtml}</div>
                        <div class="date">ğŸ“… ${new Date(article.date).toLocaleDateString('ja-JP')}</div>
                    </div>
                `;
            });
            
            articlesDiv.innerHTML = html;
        }

        function clearResults() {
            document.getElementById('status').style.display = 'none';
            document.getElementById('articles').innerHTML = '<p style="text-align: center; color: #666;">ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ API ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚</p>';
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        window.addEventListener('load', function() {
            console.log('ğŸš€ Rapid Azure Digest ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆç’°å¢ƒ');
            console.log('åˆ©ç”¨å¯èƒ½ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:', endpoints);
        });
    </script>
</body>
</html>